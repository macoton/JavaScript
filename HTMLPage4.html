<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title></title>
</head>
<body>
    <div id="canvas">

    </div>
    <script>
        var digitFreeformArray = [[[21, 0], [95, 0], [98, 1], [83, 10], [34, 10], [18, 1]], 
        [[99, 2], [92, 47], [82, 52], [76, 48], [82, 9], [98, 1]], 
        [[90, 56], [84, 96], [82, 98], [68, 92], [74, 57], [83, 52]], 
        [[79, 100], [4, 99], [2, 98], [16, 91], [66, 91], [81, 98]], 
        [[0, 97], [6, 57], [16, 53], [24, 56], [17, 90], [2, 98]], 
        [[8, 48], [16, 2], [18, 1], [32, 8], [25, 48], [17, 52]], 
        [[26, 49], [75, 48], [83, 53], [74, 57], [25, 56], [18, 52]]];
        var digitOnOffArray = [0x3F, 0x06, 0x5B, 0x4F, 0x66, 0x6D, 0x7D, 0x07, 0x7F, 0x6F];

        window.onload = function () {
            try {

                //タイムアウト処理
                function timeout() {
                    //現在日時文字列を取得
                    var now = new Date();
                    var datetime =
                        ('0000' + now.getFullYear()).substr(-4) + '/' +
                        ('00' + (now.getMonth() + 1)).substr(-2) + '/' +
                        ('00' + now.getDate()).substr(-2) + ' ' +
                        ('00' + now.getHours()).substr(-2) + ':' +
                        ('00' + now.getMinutes()).substr(-2) + ':' +
                        ('00' + now.getSeconds()).substr(-2);
                    //描画
                    for (var count = 0; count < 19; ++count) {
                        var digit = document.getElementById('digit' + count);
                        var context = digit.getContext('2d');
                        var number = datetime.substr(count, 1);
                        if (number >= '0' && number <= '9') {
                            var digitOnOff = digitOnOffArray[parseInt(number, 10)];
                            for (var count2 = 0; count2 < 7; ++count2) {
                                context.fillStyle = digitOnOff >> count2 & 1 ? 'black' : 'white';
                                context.beginPath();
                                context.moveTo(digitFreeformArray[count2][0][0] * digit.offsetWidth / 100, digitFreeformArray[count2][0][1] * digit.offsetHeight / 100);
                                for (var count3 = 1; count3 < digitFreeformArray[count2].length; ++count3) {
                                    context.lineTo(digitFreeformArray[count2][count3][0] * digit.offsetWidth / 100, digitFreeformArray[count2][count3][1] * digit.offsetHeight / 100);
                                }
                                context.moveTo(digitFreeformArray[count2][0][0] * digit.offsetWidth / 100, digitFreeformArray[count2][0][1] * digit.offsetHeight / 100);
                                context.fill();
                            }
                        }
                    }
                }

                //描画領域を取得
                var canvas = document.getElementById('canvas');
                if (!canvas) {
                    throw new Error('not fond canvas.');
                }
                //描画領域を分割
                //YYYY/MM/DD HH:MM:SS
                //          1
                //01234567890123456789
                var digit = [];
                for (var count = 0; count < 19; ++count) {
                    digit.push('<canvas id="digit' + count + '" width="35%" height="70%"></canvas>');
                }
                canvas.innerHTML = digit.join('');
                //タイムアウト処理設定
                (function () {
                    //タイムアウト処理
                    timeout();
                    //次回タイムアウト処理設定
                    var remain = 1000 - (new Date().getTime() % 1000);
                    setTimeout(arguments.callee, remain);
                })();
            }
            catch (e) {
                //例外処理
                document.writeln(e.message);
                console.log('stack:\n' + e.stack);
            }
        };
    </script>
</body>
</html>